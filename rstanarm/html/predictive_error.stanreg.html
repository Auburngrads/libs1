<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: In-sample or out-of-sample predictive errors</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for predictive_error.stanreg {rstanarm}"><tr><td>predictive_error.stanreg {rstanarm}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>In-sample or out-of-sample predictive errors</h2>

<h3>Description</h3>

<p>This is a convenience function for computing <i>y - yrep</i> 
(in-sample, for observed <i>y</i>) or <i>y - ytilde</i> 
(out-of-sample, for new or held-out <i>y</i>). The method for stanreg objects 
calls <code><a href="posterior_predict.stanreg.html">posterior_predict</a></code> internally, whereas the method for
objects with class <code>"ppd"</code> accepts the matrix returned by 
<code>posterior_predict</code> as input and can be used to avoid multiple calls to 
<code>posterior_predict</code>.
</p>


<h3>Usage</h3>

<pre>
## S3 method for class 'stanreg'
predictive_error(object, newdata = NULL, draws = NULL,
  re.form = NULL, seed = NULL, offset = NULL, ...)

## S3 method for class 'ppd'
predictive_error(object, y, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>object</code></td>
<td>
<p>Either a fitted model object returned by one of the 
<span class="pkg">rstanarm</span> modeling functions (a <a href="stanreg-objects.html">stanreg 
object</a>) or, for the <code>"ppd"</code> method, a matrix of draws from the 
posterior predictive distribution returned by 
<code><a href="posterior_predict.stanreg.html">posterior_predict</a></code>.</p>
</td></tr>
<tr valign="top"><td><code>newdata, draws, seed, offset, re.form</code></td>
<td>
<p>Optional arguments passed to 
<code><a href="posterior_predict.stanreg.html">posterior_predict</a></code>. For binomial models, please see the
<strong>Note</strong> section below if <code>newdata</code> will be specified.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Currently ignored.</p>
</td></tr>
<tr valign="top"><td><code>y</code></td>
<td>
<p>For the <code>"ppd"</code> method only, a vector of <i>y</i> values the 
same length as the number of columns in the matrix used as <code>object</code>. 
The method for stanreg objects takes <code>y</code> directly from the fitted 
model object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>draws</code> by <code>nrow(newdata)</code> matrix. If <code>newdata</code> is 
not specified then it will be <code>draws</code> by <code>nobs(object)</code>.
</p>


<h3>Note</h3>

<p>The <strong>Note</strong> section in <code><a href="posterior_predict.stanreg.html">posterior_predict</a></code> about 
<code>newdata</code> for binomial models also applies for
<code>predictive_error</code>, with one important difference. For
<code>posterior_predict</code> if the left-hand side of the model formula is 
<code>cbind(successes, failures)</code> then the particular values of 
<code>successes</code> and <code>failures</code> in <code>newdata</code> don't matter, only 
that they add to the desired number of trials. <strong>This is not the case
for</strong> <code>predictive_error</code>. For <code>predictive_error</code> the particular
value of <code>successes</code> matters because it is used as <i>y</i> when
computing the error.
</p>


<h3>See Also</h3>

<p><code><a href="posterior_predict.stanreg.html">posterior_predict</a></code> to draw
from the posterior predictive distribution without computing predictive
errors.
</p>


<h3>Examples</h3>

<pre>
if (!exists("example_model")) example(example_model)
err1 &lt;- predictive_error(example_model, draws = 50)
hist(err1)

# Using newdata with a binomial model
formula(example_model)
nd &lt;- data.frame(
 size = c(10, 20), 
 incidence = c(5, 10), 
 period = factor(c(1,2)), 
 herd = c(1, 15)
)
err2 &lt;- predictive_error(example_model, newdata = nd, draws = 10, seed = 1234)

# stanreg vs ppd methods
fit &lt;- stan_glm(mpg ~ wt, data = mtcars, iter = 300)
preds &lt;- posterior_predict(fit, seed = 123)
all.equal(
  predictive_error(fit, seed = 123),
  predictive_error(preds, y = fit$y)
)

</pre>

<hr /><div style="text-align: center;">[Package <em>rstanarm</em> version 2.17.3 <a href="00Index.html">Index</a>]</div>
</body></html>
