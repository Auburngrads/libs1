<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Pairs method for stanreg objects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for pairs.stanreg {rstanarm}"><tr><td>pairs.stanreg {rstanarm}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Pairs method for stanreg objects</h2>

<h3>Description</h3>

<p>Interface to <span class="pkg">bayesplot</span>'s <code><a href="../../bayesplot/html/mcmc_pairs.html">mcmc_pairs</a></code> function 
for use with <span class="pkg">rstanarm</span> models. Be careful not to specify too
many parameters to include or the plot will be both hard to read and slow to
render.
</p>


<h3>Usage</h3>

<pre>
## S3 method for class 'stanreg'
pairs(x, pars = NULL, regex_pars = NULL,
  condition = pairs_condition(nuts = "accept_stat__"), ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>A fitted model object returned by one of the 
<span class="pkg">rstanarm</span> modeling functions. See <code><a href="stanreg-objects.html">stanreg-objects</a></code>.</p>
</td></tr>
<tr valign="top"><td><code>pars</code></td>
<td>
<p>An optional character vetor of parameter names. All parameters 
are included by default, but for models with more than just a few 
parameters it may be far too many to visualize on a small computer screen 
and also may require substantial computing time.</p>
</td></tr>
<tr valign="top"><td><code>regex_pars</code></td>
<td>
<p>An optional character vector of <a href="../../base/html/grep.html">regular 
expressions</a> to use for parameter selection. <code>regex_pars</code> can be used
in place of <code>pars</code> or in addition to <code>pars</code>. Currently, all
functions that accept a <code>regex_pars</code> argument ignore it for models fit
using optimization.</p>
</td></tr>
<tr valign="top"><td><code>condition</code></td>
<td>
<p>Same as the <code>condition</code> argument to 
<code><a href="../../bayesplot/html/mcmc_pairs.html">mcmc_pairs</a></code> except the <em>default is different</em>
for <span class="pkg">rstanarm</span> models. By default, the <code>mcmc_pairs</code> function in
the <span class="pkg">bayesplot</span> package plots some of the Markov chains (half, in the
case of an even number of chains) in the panels above the diagonal and the
other half in the panels below the diagonal. However since we know that 
<span class="pkg">rstanarm</span> models were fit using Stan (which <span class="pkg">bayesplot</span> doesn't 
assume) we can make the default more useful by splitting the draws 
according to the <code>accept_stat__</code> diagnostic. The plots below the 
diagonal will contain realizations that are below the median 
<code>accept_stat__</code> and the plots above the diagonal will contain 
realizations that are above the median <code>accept_stat__</code>. To change this
behavior see the documentation of the <code>condition</code> argument at 
<code><a href="../../bayesplot/html/mcmc_pairs.html">mcmc_pairs</a></code>.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Optional arguments passed to <code><a href="../../bayesplot/html/mcmc_pairs.html">mcmc_pairs</a></code>. 
The <code>np</code>, <code>lp</code>, and <code>max_treedepth</code> arguments to 
<code>mcmc_pairs</code> are handled automatically by <span class="pkg">rstanarm</span> and do not 
need to be specified by the user in <code>...</code>. The arguments that can be 
specified in <code>...</code> include <code>transformations</code>, <code>diag_fun</code>,
<code>off_diag_fun</code>, <code>diag_args</code>, <code>off_diag_args</code>,
and <code>np_style</code>. These arguments are
documented thoroughly on the help page for
<code><a href="../../bayesplot/html/mcmc_pairs.html">mcmc_pairs</a></code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre>

if (!exists("example_model")) example(example_model)

bayesplot::color_scheme_set("purple")

# see 'condition' argument above for details on the plots below and 
# above the diagonal. default is to split by accept_stat__.
pairs(example_model, pars = c("(Intercept)", "log-posterior"))

pairs(
  example_model, 
  regex_pars = "herd:[2,7,9]", 
  diag_fun = "dens",
  off_diag_fun = "hex"
)



# for demonstration purposes, intentionally fit a model that
# will (almost certainly) have some divergences
fit &lt;- stan_glm(
  mpg ~ ., data = mtcars,
  iter = 1000,
  # this combo of prior and adapt_delta should lead to some divergences
  prior = hs(),
  adapt_delta = 0.9
)

pairs(fit, pars = c("wt", "sigma", "log-posterior"))

pairs(
  fit, 
  pars = c("wt", "sigma", "log-posterior"), 
  transformations = list(sigma = "log"), # show log(sigma) instead of sigma
  off_diag_fun = "hex" # use hexagonal heatmaps instead of scatterplots
)


bayesplot::color_scheme_set("brightblue")
pairs(
  fit, 
  pars = c("(Intercept)", "wt", "sigma", "log-posterior"), 
  transformations = list(sigma = "log"), 
  off_diag_args = list(size = 3/4, alpha = 1/3), # size and transparency of scatterplot points
  np_style = pairs_style_np(div_color = "black", div_shape = 2) # color and shape of the divergences
)

# Using the condition argument to show divergences above the diagonal 
pairs(
  fit, 
  pars = c("(Intercept)", "wt", "log-posterior"), 
  condition = pairs_condition(nuts = "divergent__")
)



</pre>

<hr /><div style="text-align: center;">[Package <em>rstanarm</em> version 2.17.3 <a href="00Index.html">Index</a>]</div>
</body></html>
