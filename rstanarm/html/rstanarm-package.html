<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Applied Regression Modeling via RStan</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for rstanarm-package {rstanarm}"><tr><td>rstanarm-package {rstanarm}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Applied Regression Modeling via RStan</h2>

<h3>Description</h3>


<p><img src="../help/figures/stanlogo.png" width="50px" alt="mc-stan.org" />
<em>Stan Development Team</em>

</p>
<p>The <span class="pkg">rstanarm</span> package is an appendage to the <span class="pkg">rstan</span> package that
enables many of the most common applied regression models to be estimated
using Markov Chain Monte Carlo, variational approximations to the posterior
distribution, or optimization. The <span class="pkg">rstanarm</span> package allows these models
to be specified using the customary R modeling syntax (e.g., like that of
<code><a href="../../stats/html/glm.html">glm</a></code> with a <code>formula</code> and a <code>data.frame</code>).
</p>
<p>The set of models supported by <span class="pkg">rstanarm</span> is large (and will continue to
grow), but also limited enough so that it is possible to integrate them
tightly with the <code><a href="pp_check.stanreg.html">pp_check</a></code> function for graphical posterior
predictive checks and the <code><a href="posterior_predict.stanreg.html">posterior_predict</a></code> function to easily
estimate the effect of specific manipulations of predictor variables or to
predict the outcome in a training set.
</p>
<p>The objects returned by the <span class="pkg">rstanarm</span> modeling functions are called
<code><a href="stanreg-objects.html">stanreg</a></code> objects. In addition to all of the
typical <code><a href="stanreg-methods.html">methods</a></code> defined for fitted model
objects, stanreg objects can be passed to the <code><a href="../../loo/html/loo.html">loo</a></code> function
in the <span class="pkg">loo</span> package for model comparison or to the
<code><a href="../../shinystan/html/launch_shinystan.html">launch_shinystan</a></code> function in the <span class="pkg">shinystan</span>
package in order to visualize the posterior distribution using the ShinyStan
graphical user interface. See the <span class="pkg">rstanarm</span> vignettes for more details
about the entire process.
</p>


<h3>Estimation algorithms</h3>

<p>The modeling functions in the <span class="pkg">rstanarm</span> package take an <code>algorithm</code>
argument that can be one of the following:
</p>

<dl>
<dt><strong>Sampling</strong> (<code>algorithm="sampling"</code>)</dt><dd>
<p>Uses Markov Chain Monte Carlo (MCMC) &mdash; in particular, Hamiltonian Monte
Carlo (HMC) with a tuned but diagonal mass matrix &mdash; to draw from the
posterior distribution of the parameters. See <code><a href="../../rstan/html/sampling.html">sampling</a></code>
for more details. This is the slowest but most reliable of the available
estimation algorithms and it is <strong>the default and recommended
algorithm for statistical inference.</strong>
</p>
</dd>
<dt><strong>Mean-field</strong> (<code>algorithm="meanfield"</code>)</dt><dd>
<p>Uses mean-field variational inference to draw from an approximation to the
posterior distribution. In particular, this algorithm finds the set of
independent normal distributions in the unconstrained space that &mdash; when
transformed into the constrained space &mdash; most closely approximate the
posterior distribution. Then it draws repeatedly from these independent
normal distributions and transforms them into the constrained space. The
entire process is much faster than HMC and yields independent draws but
<strong>is not recommended for final statistical inference</strong>. It can be
useful to narrow the set of candidate models in large problems, particularly
when specifying <code>QR=TRUE</code> in <code><a href="stan_glm.html">stan_glm</a></code>,
<code><a href="stan_glmer.html">stan_glmer</a></code>, and <code><a href="stan_gamm4.html">stan_gamm4</a></code>, but is <strong>only
an approximation to the posterior distribution</strong>.
</p>
</dd>
<dt><strong>Full-rank</strong> (<code>algorithm="fullrank"</code>)</dt><dd>
<p>Uses full-rank variational inference to draw from an approximation to the
posterior distribution by finding the multivariate normal distribution in
the unconstrained space that &mdash; when transformed into the constrained space
&mdash; most closely approximates the posterior distribution. Then it draws
repeatedly from this multivariate normal distribution and transforms the
draws into the constrained space. This process is slower than meanfield
variational inference but is faster than HMC. Although still an
approximation to the posterior distribution and thus <strong>not recommended
for final statistical inference</strong>, the approximation is more realistic than
that of mean-field variational inference because the parameters are not
assumed to be independent in the unconstrained space. Nevertheless, fullrank
variational inference is a more difficult optimization problem and the
algorithm is more prone to non-convergence or convergence to a local
optimum.
</p>
</dd>
<dt><strong>Optimizing</strong> (<code>algorithm="optimizing"</code>)</dt><dd>
<p>Finds the posterior mode using a C++ implementation of the LBGFS algorithm.
See <code><a href="../../rstan/html/optimizing.html">optimizing</a></code> for more details. If there is no prior
information, then this is equivalent to maximum likelihood, in which case
there is no great reason to use the functions in the <span class="pkg">rstanarm</span> package
over the emulated functions in other packages. However, if priors are
specified, then the estimates are penalized maximum likelihood estimates,
which may have some redeeming value. Currently, optimization is only
supported for <code><a href="stan_glm.html">stan_glm</a></code>.
</p>
</dd>
</dl>



<h3>Modeling functions</h3>

<p>The model estimating functions are described in greater detail in their
individual help pages and vignettes. Here we provide a very brief
overview:
</p>

<dl>
<dt><code><a href="stan_lm.html">stan_lm</a></code>, <code>stan_aov</code>, <code>stan_biglm</code></dt><dd>
<p>Similar to <code><a href="../../stats/html/lm.html">lm</a></code> or <code><a href="../../stats/html/aov.html">aov</a></code> but with
novel regularizing priors on the model parameters that are driven by prior
beliefs about <i>R^2</i>, the proportion of variance in the outcome
attributable to the predictors in a linear model.
</p>
</dd>
<dt><code><a href="stan_glm.html">stan_glm</a></code>, <code>stan_glm.nb</code></dt><dd>
<p>Similar to <code><a href="../../stats/html/glm.html">glm</a></code> but with various possible prior
distributions for the coefficients and, if applicable, a prior distribution
for any auxiliary parameter in a Generalized Linear Model (GLM) that is
characterized by a <code><a href="../../stats/html/family.html">family</a></code> object (e.g. the shape
parameter in Gamma models). It is also possible to estimate a negative
binomial model in a similar way to the <code><a href="../../MASS/html/glm.nb.html">glm.nb</a></code> function
in the <span class="pkg">MASS</span> package.
</p>
</dd>
<dt><code><a href="stan_glmer.html">stan_glmer</a></code>, <code>stan_glmer.nb</code>, <code>stan_lmer</code></dt><dd>
<p>Similar to the <code><a href="../../lme4/html/glmer.html">glmer</a></code>, <code><a href="../../lme4/html/glmer.nb.html">glmer.nb</a></code> and
<code><a href="../../lme4/html/lmer.html">lmer</a></code> functions in the <span class="pkg">lme4</span> package in that GLMs
are augmented to have group-specific terms that deviate from the common
coefficients according to a mean-zero multivariate normal distribution with
a highly-structured but unknown covariance matrix (for which <span class="pkg">rstanarm</span>
introduces an innovative prior distribution). MCMC provides more
appropriate estimates of uncertainty for models that consist of a mix of
common and group-specific parameters.
</p>
</dd>
<dt><code><a href="stan_gamm4.html">stan_gamm4</a></code></dt><dd>
<p>Similar to <code><a href="../../gamm4/html/gamm4.html">gamm4</a></code> in the <span class="pkg">gamm4</span> package, which
augments a GLM (possibly with group-specific terms) with nonlinear smooth
functions of the predictors to form a Generalized Additive Mixed Model
(GAMM). Rather than calling <code><a href="../../lme4/html/glmer.html">glmer</a></code> like
<code><a href="../../gamm4/html/gamm4.html">gamm4</a></code> does, <code><a href="stan_gamm4.html">stan_gamm4</a></code> essentially calls
<code><a href="stan_glmer.html">stan_glmer</a></code>, which avoids the optimization issues that often
crop up with GAMMs and provides better estimates for the uncertainty of the
parameter estimates.
</p>
</dd>
<dt><code><a href="stan_polr.html">stan_polr</a></code></dt><dd>
<p>Similar to <code><a href="../../MASS/html/polr.html">polr</a></code> in the <span class="pkg">MASS</span> package in that it
models an ordinal response, but the Bayesian model also implies a prior
distribution on the unknown cutpoints. Can also be used to model binary
outcomes, possibly while estimating an unknown exponent governing the
probability of success.
</p>
</dd>
<dt><code><a href="stan_betareg.html">stan_betareg</a></code></dt><dd>
<p>Similar to <code><a href="../../betareg/html/betareg.html">betareg</a></code> in that it models an outcome that
is a rate (proportion) but, rather than performing maximum likelihood
estimation, full Bayesian estimation is performed by default, with
customizable prior distributions for all parameters.
</p>
</dd>
<dt><code><a href="stan_clogit.html">stan_clogit</a></code></dt><dd>
<p>Similar to <code><a href="../../survival/html/clogit.html">clogit</a></code> in that it models an binary outcome
where the number of successes and failures is fixed within each stratum by
the research design. There are some minor syntactical differences relative
to <code><a href="../../survival/html/clogit.html">clogit</a></code> that allow <code>stan_clogit</code> to accept
group-specific terms as in <code><a href="stan_glmer.html">stan_glmer</a></code>.
</p>
</dd>
</dl>



<h3>Prior distributions</h3>

<p>See <a href="priors.html">priors help page</a> for an overview of the various choices
the user can make for prior distributions. The package vignettes also provide
examples of using many of the available priors as well as more detailed
descriptions of some of the novel priors used by <span class="pkg">rstanarm</span>.
</p>


<h3>References</h3>

<p>Bates, D., Maechler, M., Bolker, B., and Walker, S. (2015). Fitting linear 
mixed-Effects models using lme4. <em>Journal of Statistical Software</em>.
67(1), 1&ndash;48.
</p>
<p>Gelman, A., Carlin, J. B., Stern, H. S., Dunson, D. B., Vehtari,
A., and Rubin, D. B. (2013). <em>Bayesian Data Analysis.</em> Chapman &amp; Hall/CRC
Press, London, third edition. <a href="http://stat.columbia.edu/~gelman/book/">http://stat.columbia.edu/~gelman/book/</a>
</p>
<p>Gelman, A. and Hill, J. (2007). <em>Data Analysis Using
Regression and Multilevel/Hierarchical Models.</em> Cambridge University Press,
Cambridge, UK. <a href="http://stat.columbia.edu/~gelman/arm/">http://stat.columbia.edu/~gelman/arm/</a>
</p>
<p>Stan Development Team. (2017). <em>Stan Modeling Language Users Guide and
Reference Manual.</em> <a href="http://mc-stan.org/documentation/">http://mc-stan.org/documentation/</a>
</p>
<p>Vehtari, A., Gelman, A., and Gabry, J. (2017). Practical
Bayesian model evaluation using leave-one-out cross-validation and WAIC.
<em>Statistics and Computing</em>. 27(5), 1413&ndash;1432.
doi:10.1007/s11222-016-9696-4. arXiv preprint:
<a href="http://arxiv.org/abs/1507.04544/">http://arxiv.org/abs/1507.04544/</a>
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="stanreg-objects.html">stanreg-objects</a></code> and <code><a href="stanreg-methods.html">stanreg-methods</a></code> for
details on the fitted model objects returned by the modeling functions.
</p>
</li>
<li><p> The custom <code><a href="plot.stanreg.html">plot</a></code> and
<code><a href="pp_check.stanreg.html">pp_check</a></code> methods for the various plots that can be used to
explore and check fitted models.
</p>
</li>
<li> <p><a href="http://mc-stan.org/">http://mc-stan.org/</a> for more information on the Stan C++
package used by <span class="pkg">rstanarm</span> for model fitting.
</p>
</li>
<li> <p><a href="https://github.com/stan-dev/rstanarm/issues/">https://github.com/stan-dev/rstanarm/issues/</a> to submit a bug
report or feature request.
</p>
</li>
<li> <p><a href="http://discourse.mc-stan.org">http://discourse.mc-stan.org</a> to ask a
question about <span class="pkg">rstanarm</span> on the Stan-users forum.
</p>
</li></ul>


<hr /><div style="text-align: center;">[Package <em>rstanarm</em> version 2.17.2 <a href="00Index.html">Index</a>]</div>
</body></html>
