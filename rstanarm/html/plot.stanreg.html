<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Plot method for stanreg objects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for plot.stanreg {rstanarm}"><tr><td>plot.stanreg {rstanarm}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Plot method for stanreg objects</h2>

<h3>Description</h3>

<p>The <code>plot</code> method for <a href="stanreg-objects.html">stanreg-objects</a> provides a convenient 
interface to the <a href="../../bayesplot/html/MCMC.html">MCMC</a> module in the <span class="pkg"><a href="../../bayesplot/html/bayesplot-package.html">bayesplot</a></span> 
package for plotting MCMC draws and diagnostics. It is also straightforward 
to use the functions from the <span class="pkg">bayesplot</span> package directly rather than 
via the <code>plot</code> method. Examples of both methods of plotting are given
below.
</p>


<h3>Usage</h3>

<pre>
## S3 method for class 'stanreg'
plot(x, plotfun = "intervals", pars = NULL,
  regex_pars = NULL, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>A fitted model object returned by one of the 
<span class="pkg">rstanarm</span> modeling functions. See <code><a href="stanreg-objects.html">stanreg-objects</a></code>.</p>
</td></tr>
<tr valign="top"><td><code>plotfun</code></td>
<td>
<p>A character string naming the <span class="pkg">bayesplot</span> 
<a href="../../bayesplot/html/MCMC.html">MCMC</a> function to use. The default is to call
<code><a href="../../bayesplot/html/mcmc_intervals.html">mcmc_intervals</a></code>. <code>plotfun</code> can be specified
either as the full name of a <span class="pkg">bayesplot</span> plotting function (e.g.
<code>"mcmc_hist"</code>) or can be abbreviated to the part of the name following
the <code>"mcmc_"</code> prefix (e.g. <code>"hist"</code>). To get the names of all
available MCMC functions see <code><a href="../../bayesplot/html/available_mcmc.html">available_mcmc</a></code>.</p>
</td></tr>
<tr valign="top"><td><code>pars</code></td>
<td>
<p>An optional character vector of parameter names.</p>
</td></tr>
<tr valign="top"><td><code>regex_pars</code></td>
<td>
<p>An optional character vector of <a href="../../base/html/grep.html">regular 
expressions</a> to use for parameter selection. <code>regex_pars</code> can be used
in place of <code>pars</code> or in addition to <code>pars</code>. Currently, all
functions that accept a <code>regex_pars</code> argument ignore it for models fit
using optimization.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Additional arguments to pass to <code>plotfun</code> for customizing the
plot. These are described on the help pages for the individual plotting 
functions. For example, the arguments accepted for the default
<code>plotfun="intervals"</code> can be found at
<code><a href="../../bayesplot/html/mcmc_intervals.html">mcmc_intervals</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Either a ggplot object that can be further customized using the
<span class="pkg">ggplot2</span> package, or an object created from multiple ggplot objects
(e.g. a gtable object created by <code><a href="../../gridExtra/html/arrangeGrob.html">arrangeGrob</a></code>).
</p>


<h3>See Also</h3>

 
<ul>
<li><p> The vignettes in the <span class="pkg">bayesplot</span> package for many examples.
</p>
</li>
<li> <p><code><a href="../../bayesplot/html/MCMC-overview.html">MCMC-overview</a></code> (<span class="pkg">bayesplot</span>) for links to
the documentation for all the available plotting functions.
</p>
</li>
<li> <p><code><a href="../../bayesplot/html/color_scheme_set.html">color_scheme_set</a></code> (<span class="pkg">bayesplot</span>) to change
the color scheme used for plotting.
</p>
</li>
<li> <p><code><a href="pp_check.stanreg.html">pp_check</a></code> for graphical posterior predictive checks.
</p>
</li>
<li> <p><code><a href="stan_gamm4.html">plot_nonlinear</a></code> for models with nonlinear smooth 
functions fit using <code><a href="stan_gamm4.html">stan_gamm4</a></code>.
</p>
</li></ul>



<h3>Examples</h3>

<pre>

# Use rstanarm example model
if (!exists("example_model")) example(example_model)
fit &lt;- example_model

#####################################
### Intervals and point estimates ###
#####################################
plot(fit) # same as plot(fit, "intervals"), plot(fit, "mcmc_intervals")

p &lt;- plot(fit, pars = "size", regex_pars = "period",
          prob = 0.5, prob_outer = 0.9)
p + ggplot2::ggtitle("Posterior medians \n with 50% and 90% intervals")

# Shaded areas under densities
bayesplot::color_scheme_set("brightblue")
plot(fit, "areas", regex_pars = "period",
     prob = 0.5, prob_outer = 0.9)

# Make the same plot by extracting posterior draws and calling
# bayesplot::mcmc_areas directly
x &lt;- as.array(fit, regex_pars = "period")
bayesplot::mcmc_areas(x, prob = 0.5, prob_outer = 0.9)


##################################
### Histograms &amp; density plots ###
##################################
plot_title &lt;- ggplot2::ggtitle("Posterior Distributions")
plot(fit, "hist", regex_pars = "period") + plot_title
plot(fit, "dens_overlay", pars = "(Intercept)",
     regex_pars = "period") + plot_title

####################
### Scatterplots ###
####################
bayesplot::color_scheme_set("teal")
plot(fit, "scatter", pars = paste0("period", 2:3))
plot(fit, "scatter", pars = c("(Intercept)", "size"),
     size = 3, alpha = 0.5) +
     ggplot2::stat_ellipse(level = 0.9)


####################################################
### Rhat, effective sample size, autocorrelation ###
####################################################
bayesplot::color_scheme_set("red")

# rhat
plot(fit, "rhat")
plot(fit, "rhat_hist")

# ratio of effective sample size to total posterior sample size
plot(fit, "neff")
plot(fit, "neff_hist")

# autocorrelation by chain
plot(fit, "acf", pars = "(Intercept)", regex_pars = "period")
plot(fit, "acf_bar", pars = "(Intercept)", regex_pars = "period")


##################
### Traceplots ###
##################
# NOTE: rstanarm doesn't store the warmup draws (to save space because they
# are not so essential for diagnosing the particular models implemented in
# rstanarm) so the iterations in the traceplot are post-warmup iterations

bayesplot::color_scheme_set("pink")
(trace &lt;- plot(fit, "trace", pars = "(Intercept)"))

# change traceplot colors to ggplot defaults or custom values
trace + ggplot2::scale_color_discrete()
trace + ggplot2::scale_color_manual(values = c("maroon", "skyblue2"))

# changing facet layout 
plot(fit, "trace", pars = c("(Intercept)", "period2"),
     facet_args = list(nrow = 2))
# same plot by calling bayesplot::mcmc_trace directly
x &lt;- as.array(fit, pars = c("(Intercept)", "period2"))
bayesplot::mcmc_trace(x, facet_args = list(nrow = 2))


############
### More ###
############

# regex_pars examples
plot(fit, regex_pars = "herd:1\\]")
plot(fit, regex_pars = "herd:[279]")
plot(fit, regex_pars = "herd:[279]|period2")
plot(fit, regex_pars = c("herd:[279]", "period2"))


# For graphical posterior predictive checks see
# help("pp_check.stanreg")

</pre>

<hr /><div style="text-align: center;">[Package <em>rstanarm</em> version 2.17.2 <a href="00Index.html">Index</a>]</div>
</body></html>
