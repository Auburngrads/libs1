<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: HTTP POST/PUT/PATCH requests</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for post-requests {crul}"><tr><td>post-requests {crul}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>HTTP POST/PUT/PATCH requests</h2>

<h3>Description</h3>

<p>HTTP POST/PUT/PATCH requests
</p>


<h3>Examples</h3>

<pre>
(x &lt;- HttpClient$new(url = "https://httpbin.org"))

# POST requests
## a list
(res_post &lt;- x$post('post', body = list(hello = "world"), verbose = TRUE))

## a string
(res_post &lt;- x$post('post', body = "hello world", verbose = TRUE))

## empty body request
x$post('post')

## form requests
## Not run: 
(cli &lt;- HttpClient$new(
  url = "http://apps.kew.org/wcsp/advsearch.do"
))
cli$post(
  encode = "form",
  body = list(
    page = 'advancedSearch',
    genus = 'Gagea',
    species = 'pratensis',
    selectedLevel = 'cont'
  )
)

## End(Not run)

(x &lt;- HttpClient$new(url = "https://httpbin.org"))
res &lt;- x$post("post",
  encode = "json",
  body = list(
    genus = 'Gagea',
    species = 'pratensis'
  )
)
jsonlite::fromJSON(res$parse())

# PUT requests
(x &lt;- HttpClient$new(url = "https://httpbin.org"))
(res &lt;- x$put(path = "put",
  encode = "json",
  body = list(
    genus = 'Gagea',
    species = 'pratensis'
  )
))
jsonlite::fromJSON(res$parse("UTF-8"))

res &lt;- x$put("put", body = "foo bar")
jsonlite::fromJSON(res$parse("UTF-8"))


# PATCH requests
(x &lt;- HttpClient$new(url = "https://httpbin.org"))
(res &lt;- x$patch(path = "patch",
  encode = "json",
  body = list(
    genus = 'Gagea',
    species = 'pratensis'
  )
))
jsonlite::fromJSON(res$parse("UTF-8"))

res &lt;- x$patch("patch", body = "foo bar")
jsonlite::fromJSON(res$parse("UTF-8"))


# Upload files
## image
path &lt;- file.path(Sys.getenv("R_DOC_DIR"), "html/logo.jpg")
(x &lt;- HttpClient$new(url = "https://httpbin.org"))
res &lt;- x$post(path = "post", body = list(y = upload(path)))
res$content

## text file, in a list
(x &lt;- HttpClient$new(url = "https://httpbin.org"))
file &lt;- upload(system.file("CITATION"))
res &lt;- x$post(path = "post", body = list(y = file))
jsonlite::fromJSON(res$parse("UTF-8"))

## text file, as data
res &lt;- x$post(path = "post", body = file)
jsonlite::fromJSON(res$parse("UTF-8"))
</pre>

<hr /><div style="text-align: center;">[Package <em>crul</em> version 0.5.0 <a href="00Index.html">Index</a>]</div>
</body></html>
